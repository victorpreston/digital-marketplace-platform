<div class="app-container">
  <!-- Loading Bar -->
  <mat-progress-bar 
    *ngIf="loading$ | async" 
    mode="indeterminate" 
    class="loading-bar">
  </mat-progress-bar>

  <!-- Header -->
  <mat-toolbar color="primary" class="app-header">
    <div class="header-content">
      <!-- Logo -->
      <div class="logo" (click)="navigateToHome()">
        <mat-icon>storefront</mat-icon>
        <span class="brand-name">NebulaMart</span>
      </div>

      <!-- Navigation -->
      <div class="nav-buttons" *ngIf="isAuthenticated$ | async">
        <button mat-button routerLink="/products">
          <mat-icon>inventory</mat-icon>
          Products
        </button>
        
        <button mat-button routerLink="/orders" *ngIf="currentUser">
          <mat-icon>shopping_cart</mat-icon>
          Orders
        </button>

        <!-- Role-specific navigation -->
        <button mat-button routerLink="/seller" *ngIf="isSeller()">
          <mat-icon>store</mat-icon>
          Seller Dashboard
        </button>

        <button mat-button routerLink="/courier" *ngIf="isCourier()">
          <mat-icon>delivery_dining</mat-icon>
          Courier Dashboard
        </button>

        <button mat-button routerLink="/customer" *ngIf="isCustomer()">
          <mat-icon>person</mat-icon>
          My Account
        </button>
      </div>

      <!-- User Menu -->
      <div class="user-section">
        <div *ngIf="isAuthenticated$ | async; else loginButton" class="user-menu">
          <button mat-button [matMenuTriggerFor]="userMenu">
            <mat-icon>account_circle</mat-icon>
            <span>{{ currentUser?.name }}</span>
            <mat-icon>arrow_drop_down</mat-icon>
          </button>
          
          <mat-menu #userMenu="matMenu">
            <button mat-menu-item routerLink="/profile">
              <mat-icon>person</mat-icon>
              <span>Profile</span>
            </button>
            
            <button mat-menu-item routerLink="/dashboard">
              <mat-icon>dashboard</mat-icon>
              <span>Dashboard</span>
            </button>
            
            <mat-divider></mat-divider>
            
            <button mat-menu-item (click)="logout()">
              <mat-icon>logout</mat-icon>
              <span>Logout</span>
            </button>
          </mat-menu>
        </div>

        <ng-template #loginButton>
          <button mat-raised-button color="accent" routerLink="/auth/login">
            Login
          </button>
        </ng-template>
      </div>
    </div>
  </mat-toolbar>

  <!-- Main Content -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>

  <!-- Footer -->
  <footer class="app-footer" *ngIf="!(loading$ | async)">
    <div class="footer-content">
      <div class="footer-section">
        <h4>NebulaMart</h4>
        <p>Your one-stop online marketplace</p>
      </div>
      
      <div class="footer-section">
        <h4>Quick Links</h4>
        <ul>
          <li><a routerLink="/products">Products</a></li>
          <li><a routerLink="/auth/register">Become a Seller</a></li>
          <li><a href="#support">Support</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h4>Contact</h4>
        <p>Email: support&#64;nebulamart.com</p>
        <p>Phone: (555) 123-4567</p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2024 NebulaMart. All rights reserved.</p>
    </div>
  </footer>
</div>